---
name: subplan-verifier
description: サブ計画の規模・数の検証。/plan-large-scale で作成したサブ計画が細分化基準（TODO上限、最低サブ計画数、モジュール境界）を満たしているかチェックし、問題があれば修正案を提示する。以下で起動: (1) /plan-large-scale の Phase 1 完了直後に自動チェック (2)「サブ計画をチェックして」「分割は適切？」「計画を検証して」等の手動起動
---

# Subplan Verifier

`/plan-large-scale` で作成したサブ計画の規模と数が基準に合っているか検証する。

## ワークフロー

### 1. 機械的チェック（スクリプト実行）

```powershell
powershell -Command "& '.claude/skills/subplan-verifier/scripts/verify-subplans.ps1' '<feature-name>'"
```

スクリプトが出力する項目:
- 各サブ計画の TODO数・新規ファイル数・変更ファイル数と上限超過の警告
- 規模表に基づく最低サブ計画数 vs 実際の数
- モジュール別のサブ計画マッピング

### 2. 意味的チェック（Claude判断）

スクリプト結果を踏まえて以下を判断:

| チェック項目 | 判定基準 |
|-------------|---------|
| モジュール境界の分離 | 異なるモジュールの変更が別サブ計画になっているか |
| Public API vs 実装の分離 | Public/ の新規・変更が内部実装と同じサブ計画に混在していないか |
| 破壊的変更の隔離 | 既存APIの破壊的変更が専用サブ計画に切り出されているか |
| テスト・検証の配置 | 統合テストや全体検証が最後のサブ計画にまとまっているか |
| サブ計画間の依存順序 | 番号順に実装可能な依存関係になっているか |

基準の詳細は `/plan-large-scale` SKILL.md の「細分化の基準」セクションを参照。

### 3. 結果報告

以下のフォーマットで報告:

```markdown
## サブ計画検証結果: <feature-name>

### スクリプト結果
(verify-subplans.ps1 の出力を貼付)

### 意味的チェック
| チェック項目 | 結果 | 備考 |
|-------------|------|------|
| モジュール境界 | OK/NG | ... |
| Public API分離 | OK/NG | ... |
| 破壊的変更隔離 | OK/NG | ... |
| テスト配置 | OK/NG | ... |
| 依存順序 | OK/NG | ... |

### 修正提案
(問題がある場合のみ。具体的な分割案・統合案を記載)
```

## 自動起動

`/plan-large-scale` の Phase 1（計画作成）完了後、ユーザー承認待ちの前にこのスキルを実行する。
