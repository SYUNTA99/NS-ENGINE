---
name: subplan-accuracy
description: サブ計画の実装精度予測。/plan-large-scale で作成したサブ計画群を分析し、各TODOの実装可能性とサブ計画間の整合性を評価する。Phase 1 完了後の自動チェック、または「サブ計画の精度を予測して」「実装できそう？」「サブ計画をレビューして」で起動。subplan-verifier（機械的チェック）と併用推奨。
---

# Subplan Accuracy Predictor

`/plan-large-scale` で作成されたサブ計画群の実装精度を予測する。

## ワークフロー

1. `/subplan-verifier` で機械的チェックを先に実行（推奨）
2. `<feature>/README.md` を読み、全体像を把握
3. 各サブ計画ファイルを番号順に読む
4. 以下の基準で評価し、結果を報告

## 評価基準（6項目）

### A. 個別サブ計画の評価（各サブ計画ごと）

#### 1. TODO具体性 (30%)

各TODOがそのまま実装に移せるか。

| スコア | 基準 |
|--------|------|
| A | ファイルパス・クラス/関数名・変更内容が明確。読めばコードが書ける |
| B | 対象ファイルは特定、変更内容は概要レベル。少し調査が必要 |
| C | 対象モジュールのみ特定、具体的な変更箇所が曖昧 |
| D | 「〜を実装」のみ。何をどこで変えるか不明 |

チェックポイント:
- ファイルパスが明示されているか
- 既存シンボル（クラス名・関数名）を参照しているか
- 新規作成する場合、シグネチャ/API設計が記載されているか

#### 2. スコープ適切性 (20%)

1サブ計画の作業量が適切か。

| スコア | 基準 |
|--------|------|
| A | 1セッションで完了可能、明確な完了条件 |
| B | やや大きいが管理可能、完了条件はある |
| C | 大きすぎるか小さすぎる。分割/統合を検討 |
| D | 完了条件が不明、または明らかに巨大 |

#### 3. 検証可能性 (10%)

実装後の検証方法が明確か。

| スコア | 基準 |
|--------|------|
| A | ビルド確認・テスト手順が記載 |
| B | 検証方法が暗黙的にわかる |
| C | 検証方法の記載なし |

### B. サブ計画間の整合性（全体評価）

#### 4. 依存順序 (15%)

番号順に実装可能か。

| スコア | 基準 |
|--------|------|
| A | 各サブ計画が前の番号の成果物のみに依存。順序が自然 |
| B | 概ね正しいが、一部前後入れ替え可能な箇所あり |
| C | 依存関係の逆転あり（後番号の成果物を前番号が前提とする） |
| D | 循環依存または依存関係が不明 |

#### 5. カバレッジ (15%)

全サブ計画を完了すれば機能全体が完成するか。

| スコア | 基準 |
|--------|------|
| A | README.md の目的・影響範囲が全てサブ計画でカバーされている |
| B | 主要部分はカバー、軽微な抜けあり |
| C | 重要な機能/ファイルがどのサブ計画にも含まれていない |
| D | 大きなギャップあり |

#### 6. 重複・矛盾 (10%)

サブ計画間の重複や矛盾がないか。

| スコア | 基準 |
|--------|------|
| A | 各サブ計画の責務が明確に分離されている |
| B | 軽微な重複あるが実害なし |
| C | 同じファイル/機能を複数サブ計画が変更。衝突リスクあり |

## 出力フォーマット

```markdown
## サブ計画精度予測: <feature-name>

### 全体評価: [A/B/C/D]

**総評**: [2-3文]

### 個別サブ計画

| サブ計画 | 具体性 | スコープ | 検証性 | 総合 | 備考 |
|----------|--------|----------|--------|------|------|
| 01-xxx | A | B | A | A | |
| 02-xxx | B | A | C | B | 検証方法を追記推奨 |
| ... | | | | | |

### 全体整合性

| 項目 | スコア | 備考 |
|------|--------|------|
| 依存順序 | A | |
| カバレッジ | B | XXXが未カバー |
| 重複・矛盾 | A | |

### 改善提案（C以下の項目のみ）

1. **[サブ計画名]**: [具体的な改善アクション]
2. ...
```

## 全体評価の算出

- A: 個別の総合が全てA-B、かつ全体整合性が全てA-B
- B: C以下が2件以内
- C: C以下が3件以上、またはD評価あり
- D: 全体整合性にD評価あり

## 自動起動

`/plan-large-scale` の Phase 1 完了後、ユーザー承認待ちの前に実行する。
`/subplan-verifier` の直後に実行すると効果的（機械チェック → 質的評価）。
