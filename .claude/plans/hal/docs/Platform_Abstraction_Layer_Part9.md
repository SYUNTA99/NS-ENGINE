# Unreal Engine 5.7 プラットフォーム抽象化レイヤー (HAL) 完全解説

## 第9部：プラットフォーム固有機能・システム詳細

---

## 目次

1. [CPU機能検出](#1-cpu機能検出)
2. [Windows固有機能](#2-windows固有機能)
3. [Android固有機能](#3-android固有機能)
4. [Apple/Unix固有機能](#4-appleunix固有機能)
5. [コンソール変数システム](#5-コンソール変数システム)
6. [出力デバイスシステム](#6-出力デバイスシステム)
7. [統計・診断システム](#7-統計診断システム)
8. [チャンクインストールシステム](#8-チャンクインストールシステム)
9. [ネットワーク・デバイス状態](#9-ネットワークデバイス状態)
10. [GPU・ディスプレイ情報](#10-gpuディスプレイ情報)
11. [圧縮・解凍システム](#セクション-11-圧縮解凍システム)
12. [暗号化システム](#セクション-12-暗号化システム)
13. [アーカイブ・シリアライゼーションシステム](#セクション-13-アーカイブシリアライゼーションシステム)
14. [モジュールマネージャシステム](#セクション-14-モジュールマネージャシステム)
15. [Unixシグナルハンドリング](#セクション-15-unix-シグナルハンドリング)

---

## 1. CPU機能検出

### x86 CPU機能ビット

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ECPUFeatureBits_X86 列挙型                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【CPU機能ビットフラグ】                                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  SSE2              = 1U << 2   (4)      // SSE2命令セット         │ │
│  │  SSSE3             = 1U << 3   (8)      // Supplemental SSE3      │ │
│  │  SSE42             = 1U << 4   (16)     // SSE4.2                  │ │
│  │  AVX               = 1U << 5   (32)     // AVX                     │ │
│  │  BMI1              = 1U << 6   (64)     // ビット操作命令1         │ │
│  │  BMI2              = 1U << 7   (128)    // ビット操作命令2         │ │
│  │  AVX2              = 1U << 8   (256)    // AVX2                    │ │
│  │  F16C              = 1U << 9   (512)    // Float16変換             │ │
│  │  AVX512            = 1U << 10  (1024)   // AVX512 (Skylake)        │ │
│  │  AVX512_NOCAVEATS  = 1U << 11  (2048)   // AVX512 (スロットルなし) │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【機能検出API】                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  GetFeatureBits_X86()                                            │ │
│  │   └─ CPUID から機能ビットをクエリ（内部キャッシュ）              │ │
│  │                                                                   │ │
│  │  CheckFeatureBit_X86(uint32 FeatureBit)                          │ │
│  │   └─ 単一機能のインラインチェック                                │ │
│  │                                                                   │ │
│  │  CheckAllFeatureBits_X86(uint32 FeatureBits)                     │ │
│  │   └─ 複数機能の一括チェック                                      │ │
│  │                                                                   │ │
│  │  HasAVX2InstructionSupport()                                     │ │
│  │   └─ AVX2専用チェック                                            │ │
│  │                                                                   │ │
│  │  HasTimedPauseCPUFeature()                                       │ │
│  │   └─ タイムドポーズ命令サポート                                  │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【CPUInfo ビットフィールド】                                            │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  GetCPUInfo() 戻り値のビット構成:                                 │ │
│  │                                                                   │ │
│  │  ビット 0-3:   Stepping ID                                       │ │
│  │  ビット 4-7:   Model                                             │ │
│  │  ビット 8-11:  Family                                            │ │
│  │  ビット 12-13: Processor type (Intel) / Reserved (AMD)          │ │
│  │  ビット 16-19: Extended model                                    │ │
│  │  ビット 20-27: Extended family                                   │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### セキュリティ機能検出

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    セキュリティ機能検出                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【Windows セキュリティAPI】                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  HasTPM2Support()                                                │ │
│  │   └─ TPM 2.0 サポート検出                                        │ │
│  │                                                                   │ │
│  │  HasSecureBootSupport()                                          │ │
│  │   └─ セキュアブート機能検出                                      │ │
│  │                                                                   │ │
│  │  SupportsWindows11()                                             │ │
│  │   └─ Windows 11 最小スペック検証                                 │ │
│  │                                                                   │ │
│  │  HasCPUIDInstruction()                                           │ │
│  │   └─ CPUID 命令サポート確認                                      │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Windows固有機能

### COM モデル

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        COM モデル                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【ECOMModel 列挙型】                                                    │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  enum class ECOMModel : uint8 {                                  │ │
│  │      Singlethreaded = 0,  // STA (Single-Threaded Apartment)     │ │
│  │      Multithreaded = 1    // MTA (Multi-Threaded Apartment)      │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  │  CoInitialize(ECOMModel Model)  // COM初期化                     │ │
│  │  CoUninitialize()               // COM終了                       │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### ストレージデバイス

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ストレージデバイス情報                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EStorageDeviceType 列挙型】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  enum class EStorageDeviceType : uint8 {                         │ │
│  │      Unknown = 0,     // 判定不可                                │ │
│  │      HDD = 1,         // ハードディスク（キャッシュ付き可）      │ │
│  │      SSD = 2,         // ソリッドステートドライブ                │ │
│  │      NVMe = 3,        // NVMe ドライブ                           │ │
│  │      Hybrid = 4,      // ハイブリッド SSD/HDD                    │ │
│  │      Other = 0xff     // その他                                  │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【PlatformDriveStats 構造体】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct PlatformDriveStats {                                     │ │
│  │      TCHAR DriveName;              // ドライブ文字 ('C', 'D')    │ │
│  │      uint64 UsedBytes;             // 使用済みバイト             │ │
│  │      uint64 FreeBytes;             // 空きバイト                 │ │
│  │      EStorageDeviceType DriveType; // デバイスタイプ             │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  │  UpdateDriveFreeSpace()            // 統計更新                   │ │
│  │  GetDriveStats(WIDECHAR Letter)    // ドライブ情報取得           │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Windows システム情報

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    Windows システム情報                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【レジストリ・バージョン情報】                                          │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  QueryRegKey(HKEY, SubKey, ValueName, &OutData)                  │ │
│  │   └─ レジストリクエリ（自動クリーンアップ）                      │ │
│  │                                                                   │ │
│  │  GetVSComnTools(int32 Version, &OutData)                         │ │
│  │   └─ Visual Studio 共通ツールパス取得                            │ │
│  │                                                                   │ │
│  │  VerifyWindowsVersion(Major, Minor, Build)                       │ │
│  │   └─ Windows バージョン検証                                      │ │
│  │                                                                   │ │
│  │  IsWine()                                                        │ │
│  │   └─ Wine エミュレーション検出                                   │ │
│  │                                                                   │ │
│  │  GetFileVersion(FileName)                                        │ │
│  │   └─ ファイルバージョン情報取得                                  │ │
│  │                                                                   │ │
│  │  GetOperatingSystemId()                                          │ │
│  │   └─ グローバル一意 OS インストール ID                           │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【デバイス状態】                                                        │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  GetConvertibleLaptopMode()    // コンバーチブルモード           │ │
│  │  IsDeviceHandheld()            // ハンドヘルドデバイス判定       │ │
│  │  IsRunningOnBattery()          // バッテリー駆動判定             │ │
│  │  GetBatteryLevel()             // バッテリーレベル (0-100, -1)   │ │
│  │  IsUsingBatterySaver()         // バッテリーセーバーモード       │ │
│  │  GetMaxRefreshRate()           // 最大リフレッシュレート         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【WindowsOSVersionHelper エラーコード】                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  SUCCEEDED                            = 0                        │ │
│  │  ERROR_UNKNOWNVERSION                 = 1                        │ │
│  │  ERROR_GETPRODUCTINFO_FAILED          = 2                        │ │
│  │  ERROR_GETVERSIONEX_FAILED            = 4                        │ │
│  │  ERROR_GETWINDOWSGT62VERSIONS_FAILED  = 8                        │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 3. Android固有機能

### デバイス情報

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    Android デバイス情報                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【バージョン・デバイス情報】                                            │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  GetAndroidVersion()        // "10", "11", "12" 等               │ │
│  │  GetAndroidMajorVersion()   // 整数メジャーバージョン            │ │
│  │  GetTargetSDKVersion()      // ターゲット SDK レベル (29, 30等)  │ │
│  │  GetDeviceMake()            // メーカー ("samsung")              │ │
│  │  GetDeviceModel()           // モデル識別子                      │ │
│  │  GetDeviceBuildNumber()     // プラットフォームビルド番号        │ │
│  │  GetOSLanguage()            // システム言語コード                │ │
│  │  GetProductName()           // 製品名 ("Galaxy Tab S8")          │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### バッテリー状態

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    バッテリー状態                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EBatteryState 列挙型】                                                │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  BATTERY_STATE_UNKNOWN      = 1   // 不明                        │ │
│  │  BATTERY_STATE_CHARGING     = 2   // 充電中                      │ │
│  │  BATTERY_STATE_DISCHARGING  = 3   // 放電中                      │ │
│  │  BATTERY_STATE_NOT_CHARGING = 4   // 非充電（接続中）            │ │
│  │  BATTERY_STATE_FULL         = 5   // 満充電                      │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【BatteryState 構造体】                                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct BatteryState {                                           │ │
│  │      EBatteryState State;   // 状態                              │ │
│  │      int Level;             // レベル (0-100)                    │ │
│  │      float Temperature;     // 温度 (摂氏)                       │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Android GPU/グラフィックス

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    Android GPU/グラフィックス                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【GPU 機能検出】                                                        │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  GetGPUFamily()                         // GPU ファミリー名      │ │
│  │  GetGLVersion()                         // OpenGL バージョン     │ │
│  │  SupportsFloatingPointRenderTargets()   // FP レンダーターゲット │ │
│  │  SupportsShaderFramebufferFetch()       // フレームバッファフェッチ│ │
│  │  SupportsShaderIOBlocks()               // シェーダー I/O ブロック│ │
│  │  SupportsES30()                         // OpenGL ES 3.0         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【Vulkan サポート】                                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  HasVulkanDriverSupport()               // ドライバー存在        │ │
│  │  IsVulkanAvailable()                    // 完全な Vulkan 可用性  │ │
│  │  IsDesktopVulkanAvailable()             // デスクトップ Vulkan   │ │
│  │  ShouldUseVulkan()                      // Vulkan 推奨           │ │
│  │  ShouldUseDesktopVulkan()               // デスクトップ Vulkan 推奨│ │
│  │  GetVulkanVersion()                     // Vulkan バージョン文字列│ │
│  │  GetVKQualityRecommendation()           // 品質プリセット推奨    │ │
│  │  GetVulkanDeviceNameString()            // デバイス名            │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Android CPU/サーマル

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    Android CPU/サーマル監視                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【CPUStatTime 構造体】                                                  │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct CPUStatTime {                                            │ │
│  │      uint64_t TotalTime;      // 合計 CPU 時間                   │ │
│  │      uint64_t UserTime;       // ユーザーモード時間              │ │
│  │      uint64_t NiceTime;       // Nice 優先度時間                 │ │
│  │      uint64_t SystemTime;     // カーネル時間                    │ │
│  │      uint64_t SoftIRQTime;    // ソフトウェア IRQ 時間           │ │
│  │      uint64_t IRQTime;        // ハードウェア IRQ 時間           │ │
│  │      uint64_t IdleTime;       // アイドル時間                    │ │
│  │      uint64_t IOWaitTime;     // I/O 待機時間                    │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【CPUState 構造体】                                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct CPUState {                                               │ │
│  │      static const int32 MaxSupportedCores = 16;                  │ │
│  │      int32 CoreCount;                  // 総コア数               │ │
│  │      int32 ActivatedCoreCount;         // アクティブコア数       │ │
│  │      CPUStatTime CurrentUsage[16];     // 現在の使用率           │ │
│  │      CPUStatTime PreviousUsage[16];    // 前回の使用率           │ │
│  │      int32 Status[16];                 // コア状態               │ │
│  │      double Utilization[16];           // 使用率 (%)             │ │
│  │      double AverageUtilization;        // 平均使用率             │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【コア周波数プロパティ】                                                │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  enum class ECoreFrequencyProperty {                             │ │
│  │      CurrentFrequency,   // 現在の周波数                         │ │
│  │      MaxFrequency,       // 最大周波数                           │ │
│  │      MinFrequency        // 最小周波数                           │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  │  GetCoreFrequency(CoreIndex, Property)  // コア周波数取得        │ │
│  │  GetCPUTemperature()                    // CPU 温度取得          │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Apple/Unix固有機能

### Apple プラットフォーム

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    Apple プラットフォーム                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【Objective-C メモリ管理】                                              │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  class ScopeAutoreleasePool {                                    │ │
│  │      NSAutoreleasePool* Pool;                                    │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  │  #define SCOPED_AUTORELEASE_POOL                                 │ │
│  │                                                                   │ │
│  │  CreateAutoreleasePool()      // プール作成                      │ │
│  │  ReleaseAutoreleasePool(Pool) // プール解放                      │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【バージョンチェック】                                                  │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  IsOSAtLeastVersion(                                             │ │
│  │      uint32 MacOSVersion[3],   // macOS バージョン配列           │ │
│  │      uint32 IOSVersion[3],     // iOS バージョン配列             │ │
│  │      uint32 TVOSVersion[3]     // tvOS バージョン配列            │ │
│  │  )                                                               │ │
│  │                                                                   │ │
│  │  SupportsMultithreadedFileHandles()                              │ │
│  │   └─ false を返す（スレッドローカルファイルリスト使用）          │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Unix/Linux 固有

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    Unix/Linux 固有機能                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【Unix 固有関数】                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  UngrabAllInput()                                                │ │
│  │   └─ 入力グラブ解除（デバッグ前に有用）                          │ │
│  │                                                                   │ │
│  │  HasBeenStartedRemotely()                                        │ │
│  │   └─ SSH またはリモート起動検出                                  │ │
│  │                                                                   │ │
│  │  SetupSyscallFilters()                                           │ │
│  │   └─ コマンドラインからシスコールフィルタルールをロード          │ │
│  │                                                                   │ │
│  │  HasOverriddenReturnCode(uint8* OutCode)                         │ │
│  │   └─ 終了コードオーバーライド検出                                │ │
│  │                                                                   │ │
│  │  NormalizePath()                                                 │ │
│  │   └─ パス正規化（~をホームディレクトリに展開）                   │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【PGO サポート】                                                        │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  StartNewPGOCollection(FileName)   // PGO プロファイリング開始   │ │
│  │  IsPGIActive()                     // PGO 収集中か確認           │ │
│  │  StopPGOCollectionAndCloseFile()   // PGO 収集停止・保存         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 5. コンソール変数システム

### コンソール変数フラグ

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    コンソール変数フラグ                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EConsoleVariableFlags 基本フラグ】                                    │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  ECVF_Default              = 0x0     // デフォルト               │ │
│  │  ECVF_Cheat                = 0x1     // シッピングビルドで非表示 │ │
│  │  ECVF_ReadOnly             = 0x4     // ユーザー変更不可         │ │
│  │  ECVF_Unregistered         = 0x8     // 未登録変数               │ │
│  │  ECVF_CreatedFromIni       = 0x10    // INI から作成             │ │
│  │  ECVF_RenderThreadSafe     = 0x20    // レンダースレッドコピー   │ │
│  │  ECVF_Scalability          = 0x40    // スケーラビリティ関連     │ │
│  │  ECVF_ScalabilityGroup     = 0x80    // スケーラビリティグループ │ │
│  │  ECVF_Preview              = 0x100   // プレビューに含む         │ │
│  │  ECVF_GeneralShaderChange  = 0x200   // 全シェーダーキー影響     │ │
│  │  ECVF_MobileShaderChange   = 0x400   // モバイルシェーダー影響   │ │
│  │  ECVF_DesktopShaderChange  = 0x800   // デスクトップシェーダー   │ │
│  │  ECVF_ExcludeFromPreview   = 0x1000  // プレビューから除外       │ │
│  │  ECVF_SaveForNextBoot      = 0x2000  // 次回起動用に保存         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【Set フラグ (0x00ff0000)】                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  ECVF_Set_NoSinkCall_Unsafe    = 0x00010000  // Sink 呼び出しなし│ │
│  │  ECVF_Set_SetOnly_Unsafe       = 0x00020000  // 設定のみ         │ │
│  │  ECVF_Set_ReplaceExistingTag   = 0x00040000  // タグ置換         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### SetBy 優先度

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    SetBy 優先度階層                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【優先度 (0xff000000 マスク) - 低→高】                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  ECVF_SetByConstructor         = 0x00000000  // 最低（デフォルト）│ │
│  │  ECVF_SetByScalability         = 0x02000000  // Scalability.ini  │ │
│  │  ECVF_SetByGameSetting         = 0x03000000  // ゲームユーザー設定│ │
│  │  ECVF_SetByProjectSetting      = 0x04000000  // プロジェクト設定  │ │
│  │  ECVF_SetBySystemSettingsIni   = 0x05000000  // Engine.ini       │ │
│  │  ECVF_SetByPluginLowPriority   = 0x06000000  // プラグイン（低）  │ │
│  │  ECVF_SetByDeviceProfile       = 0x07000000  // デバイスプロファイル│ │
│  │  ECVF_SetByPluginHighPriority  = 0x08000000  // プラグイン（高）  │ │
│  │  ECVF_SetByGameOverride        = 0x09000000  // ゲームオーバーライド│ │
│  │  ECVF_SetByConsoleVariablesIni = 0x0A000000  // ConsoleVariables.ini│ │
│  │  ECVF_SetByHotfix              = 0x0B000000  // ホットフィックス  │ │
│  │  ECVF_SetByPreview             = 0x0C000000  // エディタプレビュー│ │
│  │  ECVF_SetByCommandline         = 0x0D000000  // コマンドライン    │ │
│  │  ECVF_SetByCode                = 0x0E000000  // コード（デバッグ）│ │
│  │  ECVF_SetByConsole             = 0x0F000000  // 最高（コンソール）│ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 6. 出力デバイスシステム

### OutputDevice 階層

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    OutputDevice 階層                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【OutputDevice クラス階層】                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  OutputDevice (抽象基底)                                         │ │
│  │   ├── OutputDeviceFile          // ファイル出力                  │ │
│  │   ├── OutputDeviceConsole       // コンソール出力                │ │
│  │   ├── OutputDeviceError         // エラー出力                    │ │
│  │   ├── OutputDeviceMemory        // メモリバッファ                │ │
│  │   ├── OutputDeviceNull          // Null デバイス（破棄）         │ │
│  │   ├── OutputDeviceStdOut        // 標準出力                      │ │
│  │   ├── OutputDeviceDebug         // デバッグ出力                  │ │
│  │   ├── OutputDeviceRedirector    // 出力リダイレクト              │ │
│  │   └── OutputDeviceArchiveWrapper // アーカイブベース             │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ELogTimes::Type 列挙型】                                              │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  None           // タイムスタンプなし                            │ │
│  │  UTC            // UTC 時間                                      │ │
│  │  SinceGStartTime // エンジン開始からの秒数                       │ │
│  │  Local          // ローカル時間                                  │ │
│  │  Timecode       // タイムコード形式                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【出力カラー定数】                                                      │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  COLOR_BLACK, COLOR_RED, COLOR_GREEN, COLOR_BLUE                 │ │
│  │  COLOR_YELLOW, COLOR_CYAN, COLOR_PURPLE, COLOR_WHITE             │ │
│  │  COLOR_DARK_* (8種)                                              │ │
│  │  COLOR_GRAY = COLOR_DARK_WHITE                                   │ │
│  │  COLOR_NONE = "" (デフォルトに戻す)                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【GenericPlatformOutputDevices API】                                    │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  SetupOutputDevices()          // 出力デバイス初期化             │ │
│  │  GetAbsoluteLogFilename()      // ログファイルパス取得           │ │
│  │  GetLog()                      // ログ出力デバイス               │ │
│  │  GetError()                    // エラー出力デバイス             │ │
│  │  GetFeedbackContext()          // フィードバックコンテキスト     │ │
│  │  GetEventLog()                 // イベントログ（null可）         │ │
│  │  GetPerChannelFileOverrides()  // チャネル別オーバーライド       │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 7. 統計・診断システム

### ページフォールト統計

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ページフォールト統計                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【PageFaultStats 構造体】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct PageFaultStats {                                         │ │
│  │      uint64 SoftPageFaults;   // ソフト（メモリ内データ）        │ │
│  │      uint64 HardPageFaults;   // ハード（ディスク上データ）      │ │
│  │      uint64 TotalPageFaults;  // 合計                            │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EPageFaultFlags 列挙型】                                              │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  SoftPageFaults   = 0x01                                         │ │
│  │  HardPageFaults   = 0x02                                         │ │
│  │  TotalPageFaults  = 0x04                                         │ │
│  │  All              = 0xFF                                         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### I/O 統計

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        I/O 統計                                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【ProcessIOStats 構造体】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct ProcessIOStats {                                         │ │
│  │      uint64 BlockingInput;    // ブロッキング読み取り            │ │
│  │      uint64 BlockingOutput;   // ブロッキング書き込み            │ │
│  │      uint64 BlockingOther;    // その他ブロッキング              │ │
│  │      uint64 InputBytes;       // 読み取りバイト数                │ │
│  │      uint64 OutputBytes;      // 書き込みバイト数                │ │
│  │      uint64 OtherBytes;       // その他バイト数                  │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EInputOutputFlags 列挙型】                                            │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  BlockingInput   = 0x01                                          │ │
│  │  BlockingOutput  = 0x02                                          │ │
│  │  BlockingOther   = 0x04                                          │ │
│  │  InputBytes      = 0x08                                          │ │
│  │  OutputBytes     = 0x10                                          │ │
│  │  OtherBytes      = 0x20                                          │ │
│  │  All             = 0xFF                                          │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### コンテキストスイッチ統計

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    コンテキストスイッチ統計                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【ContextSwitchStats 構造体】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct ContextSwitchStats {                                     │ │
│  │      uint64 VoluntaryContextSwitches;    // 自発的スイッチ       │ │
│  │      uint64 InvoluntaryContextSwitches;  // 非自発的スイッチ     │ │
│  │      uint64 TotalContextSwitches;        // 合計スイッチ         │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EContextSwitchFlags 列挙型】                                          │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  VoluntaryContextSwitches    = 0x01                              │ │
│  │  InvoluntaryContextSwitches  = 0x02                              │ │
│  │  TotalContextSwitches        = 0x04                              │ │
│  │  All                         = 0xFF                              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 8. チャンクインストールシステム

### チャンク状態

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    チャンクインストールシステム                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EChunkLocation::Type 列挙型】                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  DoesNotExist  // チャンク不存在                                 │ │
│  │  NotAvailable  // 未インストール                                 │ │
│  │  LocalSlow     // 光学メディア                                   │ │
│  │  LocalFast     // HDD                                            │ │
│  │  BestLocation = LocalFast                                        │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EChunkInstallSpeed::Type 列挙型】                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  Paused  // 一時停止                                             │ │
│  │  Slow    // ゲーム I/O より低優先                                │ │
│  │  Fast    // ゲーム I/O より高優先                                │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EChunkPriority::Type 列挙型】                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  Immediate  // 最高優先度（低優先度をキャンセル可）              │ │
│  │  High       // 早めに取得                                        │ │
│  │  Low        // 必要でない時のみ                                  │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EChunkProgressReportingType::Type 列挙型】                            │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  ETA                 // 残り時間（秒）                           │ │
│  │  PercentageComplete  // 完了率（0-99.99形式）                    │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ENamedChunkType 列挙型】                                              │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  Invalid   // 無効                                               │ │
│  │  OnDemand  // オンデマンドコンテンツ                             │ │
│  │  Language  // 言語固有アセット                                   │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 9. ネットワーク・デバイス状態

### ネットワーク接続

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ネットワーク接続状態                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【ENetworkConnectionStatus 列挙型】                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  Unknown   = 0   // デフォルト                                   │ │
│  │  Disabled        // ネットワーク無効/不存在                      │ │
│  │  Local           // アドホック/外部接続なし LAN                  │ │
│  │  Connected       // ネットワーク接続済み                         │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ENetworkConnectionType 列挙型】                                       │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  Unknown                                                         │ │
│  │  None                                                            │ │
│  │  AirplaneMode                                                    │ │
│  │  Cell          // セルラー                                       │ │
│  │  WiFi          // Wi-Fi                                          │ │
│  │  WiMAX         // WiMAX                                          │ │
│  │  Bluetooth     // Bluetooth                                      │ │
│  │  Ethernet      // イーサネット                                   │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### デバイス画面方向

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    デバイス画面方向                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EDeviceScreenOrientation 列挙型】                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  Unknown                // 不明                                  │ │
│  │  Portrait               // ホームボタン下                        │ │
│  │  PortraitUpsideDown     // ホームボタン上                        │ │
│  │  LandscapeLeft          // ホームボタン右                        │ │
│  │  LandscapeRight         // ホームボタン左                        │ │
│  │  FaceUp                 // 画面上向き（テーブル上）              │ │
│  │  FaceDown               // 画面下向き                            │ │
│  │  PortraitSensor         // センサー駆動縦向き                    │ │
│  │  LandscapeSensor        // センサー駆動横向き                    │ │
│  │  FullSensor             // センサー駆動（ロックなし）            │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EConvertibleLaptopMode 列挙型】                                       │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  NotSupported  // コンバーチブルでない                           │ │
│  │  Laptop        // ラップトップ配置                               │ │
│  │  Tablet        // タブレット配置                                 │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### モバイルハプティクス

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    モバイルハプティクス                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EMobileHapticsType 列挙型】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  FeedbackSuccess    // 成功フィードバック                        │ │
│  │  FeedbackWarning    // 警告フィードバック                        │ │
│  │  FeedbackError      // エラーフィードバック                      │ │
│  │  SelectionChanged   // 選択変更                                  │ │
│  │  ImpactLight        // 軽いインパクト                            │ │
│  │  ImpactMedium       // 中程度インパクト                          │ │
│  │  ImpactHeavy        // 重いインパクト                            │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ハプティクス API】                                                    │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  PrepareMobileHaptics(EMobileHapticsType Type)  // 準備          │ │
│  │  TriggerMobileHaptics()                         // トリガー      │ │
│  │  ReleaseMobileHaptics()                         // 解放          │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 10. GPU・ディスプレイ情報

### GPU ドライバ情報

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    GPU ドライバ情報                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【GPUDriverInfo 構造体】                                                │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  struct GPUDriverInfo {                                          │ │
│  │      uint32 VendorId;           // ベンダー ID                   │ │
│  │      String DeviceDescription;  // カード名                      │ │
│  │      String ProviderName;       // ベンダー名                    │ │
│  │      String InternalDriverVersion;  // 内部バージョン            │ │
│  │      String UserDriverVersion;  // ユーザー向けバージョン        │ │
│  │      String DriverDate;         // ドライバ日付 (MM-DD-YYYY)     │ │
│  │      String RHIName;            // 現在の RHI                    │ │
│  │  };                                                              │ │
│  │                                                                   │ │
│  │  【ベンダー ID】                                                  │ │
│  │   0x10DE = NVIDIA                                                │ │
│  │   0x1002 = AMD                                                   │ │
│  │   0x8086 = Intel                                                 │ │
│  │   0x5143 / 0x4D4F4351 = Qualcomm                                 │ │
│  │                                                                   │ │
│  │  【メソッド】                                                     │ │
│  │   IsValid()                     // 検証                          │ │
│  │   SetAMD() / IsAMD()            // AMD 検出                      │ │
│  │   SetIntel() / IsIntel()        // Intel 検出                    │ │
│  │   SetNVIDIA() / IsNVIDIA()      // NVIDIA 検出                   │ │
│  │   SetQualcomm() / IsQualcomm()  // Qualcomm 検出                 │ │
│  │   GetUnifiedDriverVersion()     // 正規化バージョン              │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### ディスプレイ出力形式

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ディスプレイ出力形式                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【EDisplayOutputFormat 列挙型】                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  SDR_sRGB                    = 0   // SDR sRGB                   │ │
│  │  SDR_Rec709                  = 1   // SDR Rec.709                │ │
│  │  SDR_ExplicitGammaMapping    = 2   // SDR 明示的ガンマ           │ │
│  │  HDR_ACES_1000nit_ST2084     = 3   // HDR ACES 1000nit           │ │
│  │  HDR_ACES_2000nit_ST2084     = 4   // HDR ACES 2000nit           │ │
│  │  HDR_ACES_1000nit_ScRGB      = 5   // HDR ACES scRGB 1000        │ │
│  │  HDR_ACES_2000nit_ScRGB      = 6   // HDR ACES scRGB 2000        │ │
│  │  HDR_LinearEXR               = 7   // HDR Linear EXR             │ │
│  │  HDR_LinearNoToneCurve       = 8   // HDR Linear (トーンなし)    │ │
│  │  HDR_LinearWithToneCurve     = 9   // HDR Linear (トーンあり)    │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【EDisplayColorGamut 列挙型】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  sRGB_D65     = 0   // sRGB D65 白色点                          │ │
│  │  DCIP3_D65    = 1   // DCI-P3 D65                                │ │
│  │  Rec2020_D65  = 2   // Rec.2020 D65                              │ │
│  │  ACES_D60     = 3   // ACES D60                                  │ │
│  │  ACEScg_D60   = 4   // ACEScg D60                                │ │
│  │                                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## セクション 11: 圧縮・解凍システム

### ECompressionFlags 列挙型

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ECompressionFlags 列挙型                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【レガシーフォーマットフラグ（非推奨）】                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  COMPRESS_None                = 0x00   // 圧縮なし                │ │
│  │  COMPRESS_ZLIB_DEPRECATED     = 0x01   // Zlib（非推奨）          │ │
│  │  COMPRESS_GZIP_DEPRECATED     = 0x02   // Gzip（非推奨）          │ │
│  │  COMPRESS_Custom_DEPRECATED   = 0x04   // カスタム（非推奨）      │ │
│  │  COMPRESS_DeprecatedFormatFlagsMask = 0x0F  // マスク             │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【モダンオプションフラグ】                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  COMPRESS_NoFlags             = 0x00   // フラグなし              │ │
│  │  COMPRESS_BiasMemory          = 0x10   // メモリ優先（小さく）    │ │
│  │  COMPRESS_BiasSize            = 0x10   // BiasMemory のエイリアス │ │
│  │  COMPRESS_BiasSpeed           = 0x20   // 速度優先（高速に）      │ │
│  │  COMPRESS_SourceIsPadded      = 0x80   // パディング済み入力      │ │
│  │  COMPRESS_OptionsFlagsMask    = 0xF0   // オプションマスク        │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【用途フラグ】                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  COMPRESS_ForPackaging        = 0x100  // パッケージング用        │ │
│  │  COMPRESS_ForPurposeMask      = 0xF00  // 用途マスク              │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### チャンクサイズ定数

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    圧縮チャンクサイズ定数                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  LOADING_COMPRESSION_CHUNK_SIZE_PRE_369 = 32768    // 32 KB (旧形式)   │
│  LOADING_COMPRESSION_CHUNK_SIZE         = 131072   // 128 KB           │
│  SAVING_COMPRESSION_CHUNK_SIZE          = 131072   // 128 KB           │
│                                                                         │
│  DEFAULT_ZLIB_BIT_WINDOW = 15   // Zlib デフォルトビットウィンドウ     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### LZ4 定数

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         LZ4 定数                                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【バージョン情報】                                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  LZ4_VERSION_MAJOR    = 1                                         │ │
│  │  LZ4_VERSION_MINOR    = 9                                         │ │
│  │  LZ4_VERSION_RELEASE  = 4                                         │ │
│  │  LZ4_VERSION_NUMBER   = 10904  // (1*10000 + 9*100 + 4)           │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【メモリ使用量定数】                                                   │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  LZ4_MEMORY_USAGE_MIN     = 10   // 2^10 = 1 KB                   │ │
│  │  LZ4_MEMORY_USAGE_DEFAULT = 14   // 2^14 = 16 KB                  │ │
│  │  LZ4_MEMORY_USAGE_MAX     = 20   // 2^20 = 1 MB                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【サイズ制限】                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  LZ4_MAX_INPUT_SIZE = 0x7E000000  // 2,113,929,216 bytes (~2 GB)  │ │
│  │  LZ4_DISTANCE_MAX   = 65535       // 最大距離                     │ │
│  │  LZ4_COMPRESS_INPLACE_MARGIN = LZ4_DISTANCE_MAX + 32              │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【LZ4HC 圧縮レベル】                                                   │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  LZ4HC_CLEVEL_MIN     = 3    // 最小レベル                        │ │
│  │  LZ4HC_CLEVEL_DEFAULT = 9    // デフォルトレベル                  │ │
│  │  LZ4HC_CLEVEL_OPT_MIN = 10   // 最適パーサ最小                    │ │
│  │  LZ4HC_CLEVEL_MAX     = 12   // 最大レベル                        │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Oodle 圧縮システム

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     Oodle 圧縮システム                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【ECompressor 列挙型】                                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  NotSet    = 0   // 未設定                                        │ │
│  │  Selkie    = 1   // 最速解凍: ~4232.6 MB/s, 比率 1.86:1           │ │
│  │  Mermaid   = 2   // 高速解凍: ~2648.9 MB/s, 比率 2.21:1           │ │
│  │  Kraken    = 3   // バランス: ~1467.1 MB/s, 比率 2.44:1           │ │
│  │  Leviathan = 4   // 最高圧縮: ~961.8 MB/s, 比率 2.62:1            │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ECompressionLevel 列挙型】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  HyperFast4  = -4   // リアルタイムエンコード、最小圧縮           │ │
│  │  HyperFast3  = -3                                                 │ │
│  │  HyperFast2  = -2                                                 │ │
│  │  HyperFast1  = -1                                                 │ │
│  │  None        = 0    // 圧縮なし                                   │ │
│  │  SuperFast   = 1    // Kraken: 2.27:1 @ 242.6 MB/s                │ │
│  │  VeryFast    = 2    // Kraken: 2.32:1 @ 157.4 MB/s                │ │
│  │  Fast        = 3    // Kraken: 2.39:1 @ 34.8 MB/s                 │ │
│  │  Normal      = 4    // Kraken: 2.44:1 @ 22.4 MB/s (標準)          │ │
│  │  Optimal1    = 5    // Kraken: 2.55:1 @ 10.1 MB/s                 │ │
│  │  Optimal2    = 6    // Kraken: 2.56:1 @ 5.4 MB/s                  │ │
│  │  Optimal3    = 7                                                  │ │
│  │  Optimal4    = 8                                                  │ │
│  │  Optimal5    = 9    // 最大圧縮（オフラインのみ）                 │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ECompressionCommonUsage 列挙型】                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  Default                        = 0  // Kraken + Fast             │ │
│  │  FastRealtimeEncode             = 1  // Mermaid + HyperFast2      │ │
│  │  SlowerSmallerEncode            = 2  // Kraken + Normal           │ │
│  │  SlowestOfflineDistributionEncode = 3  // Kraken + Optimal2       │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【スクラッチメモリ要件】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  Mermaid VeryFast 64KB   → エンコード: ~470,000 バイト            │ │
│  │  Kraken Normal 256KB     → エンコード: ~2,160,000 バイト          │ │
│  │  デコーダ                → ~450,000 バイト                        │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### FCompression クラス

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     FCompression クラス                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【統計カウンタ（静的）】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  TAtomic<uint64> CompressorTimeCycles  // 圧縮に費やした時間      │ │
│  │  TAtomic<uint64> CompressorSrcBytes    // 圧縮前バイト数          │ │
│  │  TAtomic<uint64> CompressorDstBytes    // 圧縮後バイト数          │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【主要メソッド】                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  GetCompressorVersion(FName FormatName) → uint32                  │ │
│  │  CompressMemoryBound(FormatName, OutSize, UncompSize, Data)       │ │
│  │  GetMaximumCompressedSize(FormatName, OutMax, UncompSize, Data)   │ │
│  │  CompressMemory(FormatName, Dst, DstSize, Src, SrcSize, Flags)    │ │
│  │  CompressMemoryIfWorthDecompressing(...)  // 圧縮価値判定         │ │
│  │  UncompressMemory(FormatName, Dst, DstSize, Src, SrcSize, Flags)  │ │
│  │  UncompressMemoryStream(FormatName, Dst, DstSize, Stream, ...)    │ │
│  │  GetCompressorDDCSuffix(FormatName) → FString                     │ │
│  │  IsFormatValid(FormatName) → bool                                 │ │
│  │  VerifyCompressionFlagsValid(Flags) → bool                        │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【サポートフォーマット名 (FName)】                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  NAME_None    // 圧縮なし                                         │ │
│  │  NAME_Zlib    // Zlib 圧縮                                        │ │
│  │  NAME_Gzip    // Gzip 圧縮                                        │ │
│  │  NAME_LZ4     // LZ4 圧縮                                         │ │
│  │  NAME_Oodle   // Oodle 圧縮                                       │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## セクション 12: 暗号化システム

### FSHA1 構造体

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         FSHA1 構造体                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【定数】                                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  DigestSize = 20   // 20 バイト (160 ビット)                      │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【内部構造】                                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  uint32 m_state[5]    // 5 x uint32 状態配列                      │ │
│  │  uint64 m_count       // メッセージカウント                       │ │
│  │  uint32 __reserved1[1]                                            │ │
│  │  uint8  m_buffer[64]  // 入力バッファ (512 ビット)                │ │
│  │  uint8  m_digest[20]  // 最終ダイジェスト出力                     │ │
│  │  uint32 __reserved2[3]                                            │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【FSHAHash 関連】                                                      │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  Hash 配列サイズ: 20 バイト                                       │ │
│  │  文字列長: 40 文字 (16進数表現)                                   │ │
│  │  SHA-1 区切り文字列: "+++"                                        │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### FSHA256 構造体

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       FSHA256Signature 構造体                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  uint8 Signature[32]   // 32 バイト (256 ビット)                       │
│                                                                         │
│  【メソッド】                                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  ToString() → FString   // 16進数文字列を生成                     │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### FMD5 構造体

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         FMD5 構造体                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【FContext 内部構造】                                                  │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  uint32 state[4]    // 4 x uint32 状態配列                        │ │
│  │  uint32 count[2]    // 2 x uint32 (64ビットカウント)              │ │
│  │  uint8  buffer[64]  // 入力バッファ (512 ビット)                  │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【出力】                                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  ダイジェストサイズ: 16 バイト (128 ビット)                       │ │
│  │  Final() で外部に出力                                             │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【MD5 変換定数】                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  _S11=7,  _S12=12, _S13=17, _S14=22                               │ │
│  │  _S21=5,  _S22=9,  _S23=14, _S24=20                               │ │
│  │  _S31=4,  _S32=11, _S33=16, _S34=23                               │ │
│  │  _S41=6,  _S42=10, _S43=15, _S44=21                               │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### FAES 暗号化

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         FAES 暗号化                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【定数】                                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  AESBlockSize      = 16   // 16 バイト (128 ビット)               │ │
│  │  AES256_ROUND_COUNT = 14  // AES-256 ラウンド数                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【FAESKey 構造体】                                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  static constexpr int32 KeySize = 32  // 32 バイト (256 ビット)   │ │
│  │  uint8 Key[KeySize]                                               │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【実装モード】                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  ECB (Electronic Codebook) - 各128ビットブロックを独立して暗号化  │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ハードウェアアクセラレーション】                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  x86: AESNI 命令サポート                                          │ │
│  │  ARM: AES 暗号化命令サポート                                      │ │
│  │  フォールバック: ソフトウェア実装                                 │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## セクション 13: アーカイブ・シリアライゼーションシステム

### FArchiveState フラグ

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     FArchiveState フラグ                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【保護フラグ (FArchive により変更)】                                   │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  ArIsLoading : 1              // ロード用アーカイブ               │ │
│  │  ArIsLoadingFromCookedPackage : 1  // クックパッケージからロード  │ │
│  │  ArIsSaving : 1               // セーブ用アーカイブ               │ │
│  │  ArIsTransacting : 1          // トランザクション中               │ │
│  │  ArIsTextFormat : 1           // テキスト形式                     │ │
│  │  ArWantBinaryPropertySerialization : 1  // バイナリプロパティ     │ │
│  │  ArUseUnversionedPropertySerialization : 1  // 非バージョン化     │ │
│  │  ArForceUnicode : 1           // UTF16 強制                       │ │
│  │  ArIsPersistent : 1           // 永続ストレージ                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【プライベートフラグ】                                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  ArIsError : 1                // エラーあり                       │ │
│  │  ArIsCriticalError : 1        // クリティカルエラーあり           │ │
│  │  ArShouldSkipCompilingAssets : 1  // コンパイル中アセットスキップ │ │
│  │  ArShouldSkipUpdateCustomVersion : 1  // バージョン更新スキップ   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【パブリックフラグ】                                                   │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  ArContainsCode : 1           // スクリプトコード含む             │ │
│  │  ArContainsMap : 1            // ULevel/UWorld 含む               │ │
│  │  ArForceByteSwapping : 1      // バイトスワップ強制               │ │
│  │  ArIgnoreArchetypeRef : 1     // アーキタイプ参照スキップ         │ │
│  │  ArNoDelta : 1                // デルタシリアライズなし           │ │
│  │  ArNoIntraPropertyDelta : 1   // プロパティ内デルタなし           │ │
│  │  ArIgnoreOuterRef : 1         // Outer 参照スキップ               │ │
│  │  ArIgnoreClassGeneratedByRef : 1  // ClassGeneratedBy スキップ    │ │
│  │  ArIgnoreClassRef : 1         // Class プロパティスキップ         │ │
│  │  ArAllowLazyLoading : 1       // 遅延ロード許可                   │ │
│  │  ArIsObjectReferenceCollector : 1  // オブジェクト参照収集        │ │
│  │  ArIsModifyingWeakAndStrongReferences : 1  // 参照変更            │ │
│  │  ArIsCountingMemory : 1       // メモリカウント中                 │ │
│  │  ArShouldSkipBulkData : 1     // バルクデータスキップ             │ │
│  │  ArIsFilterEditorOnly : 1     // エディタ専用フィルタ             │ │
│  │  ArIsSavingOptionalObject : 1 // オプショナルデータ保存           │ │
│  │  ArIsSaveGame : 1             // セーブゲーム状態                 │ │
│  │  ArIsNetArchive : 1           // ネットワークデータ               │ │
│  │  ArUseCustomPropertyList : 1  // カスタムプロパティリスト         │ │
│  │  ArMergeOverrides : 1         // オーバーライドマージ             │ │
│  │  ArPreserveArrayElements : 1  // 配列要素保持                     │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【非ビットフィールドメンバ】                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  int32 ArSerializingDefaults       // デフォルトシリアライズ中    │ │
│  │  uint32 ArPortFlags                // プロパティシリアライズ修飾  │ │
│  │  int64 ArMaxSerializeSize          // 最大シリアライズサイズ      │ │
│  │  FPackageFileVersion ArUEVer       // エンジンバージョン          │ │
│  │  int32 ArLicenseeUEVer             // ライセンシーバージョン      │ │
│  │  FEngineVersionBase ArEngineVer    // コンパイル済みエンジンVer   │ │
│  │  FCustomVersionContainer* CustomVersionContainer  // カスタムVer  │ │
│  │  FProperty* SerializedProperty     // 現在のプロパティ            │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### EPropertyPortFlags 列挙型

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   EPropertyPortFlags 列挙型                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  PPF_None                        = 0x00000000  // なし                  │
│  PPF_Delimited                   = 0x00000001  // 引用符で囲む          │
│  PPF_CheckReferences             = 0x00000002  // オブジェクト参照検証  │
│  PPF_ExportsNotFullyQualified    = 0x00000004  // 完全修飾なしエクスポ  │
│  PPF_AttemptNonQualifiedSearch   = 0x00000008  // 非修飾検索試行        │
│  PPF_RestrictImportTypes         = 0x00000010  // config インポート禁止 │
│  PPF_SerializedAsImportText      = 0x00000020  // Blueprint pin 形式    │
│  PPF_ExternalEditor              = 0x00000040  // CSV/外部形式          │
│  PPF_SubobjectsOnly              = 0x00000080  // インスタンス参照のみ  │
│  PPF_DeepComparison              = 0x00000100  // 深い比較              │
│  PPF_DeepCompareInstances        = 0x00000200  // テンプレート比較      │
│  PPF_DeepCompareDSOsOnly         = 0x00000400  // DSO のみ深い比較      │
│  PPF_Copy                        = 0x00000800  // メモリ内コピー        │
│  PPF_Duplicate                   = 0x00001000  // シリアライズで複製    │
│  PPF_SimpleObjectText            = 0x00002000  // パッケージ/クラス省略 │
│  PPF_ForDiff                     = 0x00004000  // 差分用                │
│  PPF_ForDiffInstanceOnly         = 0x00008000  // インスタンス差分      │
│  PPF_ParsingDefaultProperties    = 0x00010000  // transient 許可        │
│  PPF_IncludeTransient            = 0x00020000  // transient エクスポート│
│  PPF_InstanceSubobjects          = 0x00040000  // サブオブジェクト複製  │
│  PPF_PropertyWindow              = 0x00080000  // プロパティウィンドウ  │
│  PPF_DebugDump                   = 0x00200000  // 完全修飾名強制        │
│  PPF_DuplicateForPIE             = 0x00400000  // PIE 用複製            │
│  PPF_BlueprintDebugView          = 0x02000000  // Blueprint デバッグ    │
│  PPF_ConsoleVariable             = 0x04000000  // コンソール変数        │
│  PPF_UseDeprecatedProperties     = 0x08000000  // 非推奨無視            │
│  PPF_ForceTaggedSerialization    = 0x20000000  // タグ付きシリアライズ  │
│  PPF_DuplicateVerbatim           = 0x40000000  // 逐語的複製            │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### バイトオーダー処理

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     バイトオーダー処理                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【バイトスワップマクロ】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  BYTESWAP_ORDER16(x)          // 16ビットスワップ                 │ │
│  │  BYTESWAP_ORDER32(x)          // 32ビットスワップ                 │ │
│  │  BYTESWAP_ORDER64(x)          // 64ビットスワップ                 │ │
│  │  BYTESWAP_ORDERF(float)       // float スワップ                   │ │
│  │  BYTESWAP_ORDERD(double)      // double スワップ                  │ │
│  │  BYTESWAP_ORDER_TCHARARRAY(x) // TCHAR 配列スワップ               │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【組み込み関数 (利用可能時)】                                          │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  MSVC:      _byteswap_ushort(), _byteswap_ulong(), _byteswap_uint64() │
│  │  Clang/GCC: __builtin_bswap16/32/64()                             │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【エンディアンベースマクロ (PLATFORM_LITTLE_ENDIAN=1 時)】             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  INTEL_ORDER16/32/64/F()   → 恒等変換（スワップなし）             │ │
│  │  NETWORK_ORDER16/32/64/F() → BYTESWAP_ORDER（スワップ必要）       │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## セクション 14: モジュールマネージャシステム

### EModuleLoadResult 列挙型

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   EModuleLoadResult 列挙型                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Success              // モジュール正常ロード                           │
│  FileNotFound         // モジュールファイルが見つからない               │
│  FileIncompatible     // モジュールファイルがシステムと非互換           │
│  CouldNotBeLoadedByOS // OS がモジュールファイルをロードできなかった    │
│  FailedToInitialize   // モジュール初期化失敗                           │
│  NotLoadedByGameThread // ゲームスレッド前に別スレッドがロード試行      │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### EModuleUnloadResult 列挙型

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   EModuleUnloadResult 列挙型                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Success              // モジュール正常アンロード                       │
│  UnloadNotSupported   // モジュールが動的リロードをサポートしない       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### EModuleChangeReason 列挙型

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   EModuleChangeReason 列挙型                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ModuleLoaded          // モジュールがロードされ使用可能                │
│  ModuleUnloaded        // モジュールがアンロードされ使用不可            │
│  PluginDirectoryChanged // プラグインディレクトリパスが変更             │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### ELoadModuleFlags 列挙型

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ELoadModuleFlags 列挙型                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  None        = 0x0     // フラグなし                                    │
│  LogFailures = 1 << 0  // 失敗情報をログに出力                          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### IModuleInterface

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      IModuleInterface                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【ライフサイクルメソッド】                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  StartupModule()           // DLL ロード直後、依存モジュールロード │ │
│  │  PreUnloadCallback()       // アンロード前コールバック            │ │
│  │  PostLoadCallback()        // リロード後コールバック              │ │
│  │  ShutdownModule()          // アンロード直前、StartupModule の逆順│ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【機能フラグメソッド】                                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SupportsDynamicReloading() → bool  // 動的リロードサポート       │ │
│  │  SupportsAutomaticShutdown() → bool // 自動シャットダウン対応     │ │
│  │  IsGameModule() → bool              // ゲームモジュールかどうか   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### FModuleManager 主要メソッド

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     FModuleManager 主要メソッド                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【アクセス・情報】                                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  Get() → FModuleManager&           // シングルトン取得            │ │
│  │  TearDown()                        // シングルトン破棄            │ │
│  │  GetModule(FName) → IModuleInterface*  // ロード済みモジュール取得│ │
│  │  IsModuleLoaded(FName) → bool      // ロード済みか判定 (O(1))     │ │
│  │  IsModuleSafeToUse(FName) → bool   // 安全に使用可能か            │ │
│  │  GetModuleCount() → int32          // ロード済みモジュール数      │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【ロード】                                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  LoadModule(FName, Flags) → IModuleInterface*                     │ │
│  │  LoadModuleChecked(FName) → IModuleInterface&  // 存在チェック付き│ │
│  │  LoadModuleWithFailureReason(FName, OutReason, Flags)             │ │
│  │  LoadModuleWithCallback(FName, Ar) → bool  // PostLoad 呼び出し   │ │
│  │  LoadModuleBinaryOnly(FName)               // 初期化なしロード    │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【アンロード】                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  UnloadModule(FName, bIsShutdown, bAllowUnloadCode) → bool        │ │
│  │  UnloadOrAbandonModuleWithCallback(FName, Ar)                     │ │
│  │  AbandonModuleWithCallback(FName)          // メモリに残して放棄  │ │
│  │  AbandonModule(FName)                      // 単純放棄            │ │
│  │  UnloadModulesAtShutdown()                 // ロード逆順アンロード│ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【クエリ・管理】                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  QueryModule(FName, OutStatus) → bool      // 特定モジュール状態  │ │
│  │  QueryModules(OutStatuses)                 // 全モジュール状態    │ │
│  │  FindModules(Wildcard, OutModules)         // ワイルドカード検索  │ │
│  │  ModuleExists(Name, OutPath) → bool        // ディスク上存在確認  │ │
│  │  AddModule(FName)                          // リストに追加        │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【テンプレートメソッド】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  GetModuleChecked<T>(FName) → T&           // 型付きモジュール取得│ │
│  │  GetModulePtr<T>(FName) → T*               // 型付きポインタ取得  │ │
│  │  LoadModuleChecked<T>(FName) → T&          // 型付きロード        │ │
│  │  LoadModulePtr<T>(FName) → T*              // 型付きロードポインタ│ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## セクション 15: Unix シグナルハンドリング

### リアルタイムシグナル定数

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   リアルタイムシグナル定数                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ファイル: Unix/UnixPlatformRealTimeSignals.h                          │
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SIGRTMIN + 1  // WAIT_AND_FORK_QUEUE_SIGNAL (フォーク)           │ │
│  │  SIGRTMIN + 2  // WAIT_AND_FORK_RESPONSE_SIGNAL (フォーク応答)    │ │
│  │  SIGRTMIN + 3  // HEART_BEAT_SIGNAL (ヒッチ検出)                  │ │
│  │  SIGRTMIN + 4  // VTune 予約                                      │ │
│  │  SIGRTMIN + 5  // THREAD_CALLSTACK_GENERATOR (スタック収集)       │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### クラッシュシグナル

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      クラッシュシグナル                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【PlatformCrashHandler が処理するシグナル】                            │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SIGQUIT   // ユーザー要求クラッシュ                              │ │
│  │  SIGABRT   // abort() 呼び出し                                    │ │
│  │  SIGILL    // 不正命令                                            │ │
│  │  SIGFPE    // 浮動小数点例外                                      │ │
│  │  SIGBUS    // 不正メモリアクセス                                  │ │
│  │  SIGSEGV   // セグメンテーション違反                              │ │
│  │  SIGSYS    // 不正システムコール                                  │ │
│  │  SIGTRAP   // トレーストラップ                                    │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【GracefulTerminationHandler が処理するシグナル】                      │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SIGINT    // プログラム中断 (Ctrl+C)                             │ │
│  │  SIGTERM   // ソフトウェア終了                                    │ │
│  │  SIGHUP    // ハングアップ                                        │ │
│  │                                                                   │ │
│  │  終了コード: 128 + シグナル番号 (POSIX 標準)                      │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【その他】                                                             │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SIGCHLD   // 子プロセス終了（EmptyChildHandler でゾンビ防止）    │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### シグナルハンドラ登録

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   シグナルハンドラ登録                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【使用フラグ】                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SA_SIGINFO   // ハンドラが siginfo_t と ucontext_t を受け取る    │ │
│  │  SA_RESTART   // 中断されたシステムコールを再開                   │ │
│  │  SA_ONSTACK   // 代替シグナルスタックを使用                       │ │
│  │  SA_NODEFER   // 同一シグナルをブロックしない（必要時）           │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【代替シグナルスタック】                                               │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  割り当て: FRunnableThreadUnix::AllocCrashHandlerStack()          │ │
│  │  サイズ: -crashhandlerstacksize コマンドラインで設定可能          │ │
│  │  保護: 両境界に mprotect() で保護ページ                           │ │
│  │  設定: sigaltstack() で設定                                       │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【シグナルマスク】                                                     │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  全ハンドラで sigfillset(&Action.sa_mask) を使用                  │ │
│  │  → ハンドラ実行中は全シグナルをブロック                           │ │
│  │  → 再入可能性の安全性を確保                                       │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### FPlatformMisc シグナル関連メソッド

```
┌─────────────────────────────────────────────────────────────────────────┐
│                FPlatformMisc シグナル関連メソッド                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【SetGracefulTerminationHandler()】                                    │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  SIGINT, SIGTERM, SIGHUP のハンドラをインストール                 │ │
│  │  GracefulTerminationHandler 関数を使用                            │ │
│  │  フラグ: SA_SIGINFO | SA_RESTART | SA_ONSTACK                     │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【SetCrashHandler()】                                                  │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  クラッシュシグナルハンドラを登録                                 │ │
│  │  代替シグナルスタックをインストール                               │ │
│  │  AllocCrashHandlerStack() でスタック割り当て                      │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  【コマンドライン設定】                                                 │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │  -sigdfl=SIGNAL            // 特定シグナルをデフォルトハンドラに  │ │
│  │  -crashhandlerstacksize    // クラッシュハンドラスタックサイズ    │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 次のパートへのリンク

- [第1部：アーキテクチャと設計思想](Platform_Abstraction_Layer_Part1.md)
- [第2部：プリプロセッサシステムと型システム](Platform_Abstraction_Layer_Part2.md)
- [第3部：HALコンポーネント詳細](Platform_Abstraction_Layer_Part3.md)
- [第4部：ビルドシステムと新規プラットフォーム追加](Platform_Abstraction_Layer_Part4.md)
- [第5部：スレッディング・クラッシュ処理・ネットワーク・文字列処理](Platform_Abstraction_Layer_Part5.md)
- [第6部：メモリアロケータ詳細ガイド](Platform_Abstraction_Layer_Part6.md)
- [第7部：LLM完全ガイド](Platform_Abstraction_Layer_Part7.md)
- [第8部：デバッグ・診断ツール](Platform_Abstraction_Layer_Part8.md)

---

*このドキュメントはUnreal Engine 5.7のソースコードに基づいています。*
