# Unreal Engine 5.7 プラットフォーム抽象化レイヤー (HAL) 完全解説

## 第1部：アーキテクチャと設計思想

---

## 目次

1. [概要](#1-概要)
2. [全体アーキテクチャ](#2-全体アーキテクチャ)
3. [3層抽象化モデル](#3-3層抽象化モデル)
4. [ヘッダインクルードシステム](#4-ヘッダインクルードシステム)
5. [プラットフォーム階層と分類](#5-プラットフォーム階層と分類)

---

## 1. 概要

### HALとは

**HAL（Hardware Abstraction Layer）** は、Unreal Engineのコアシステムと各OS/ハードウェアの間に位置する抽象化レイヤーです。

```
┌─────────────────────────────────────────────────────────────┐
│              ゲームコード / エンジン機能                      │
│        （ゲームプレイ、AI、物理、オーディオ等）                │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   エンジンコアシステム                        │
│          （メモリ管理、スレッド、ファイルI/O等）               │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│            HAL（Hardware Abstraction Layer）                 │  ← ここ
│           プラットフォーム非依存の統一API                      │
└─────────────────────────────────────────────────────────────┘
                              │
          ┌───────────────────┼───────────────────┐
          ▼                   ▼                   ▼
   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
   │   Windows   │     │    macOS    │     │    Linux    │
   │  Platform   │     │  Platform   │     │  Platform   │
   │  実装       │     │  実装       │     │  実装       │
   └─────────────┘     └─────────────┘     └─────────────┘
          │                   │                   │
          ▼                   ▼                   ▼
   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
   │  Win32 API  │     │  Cocoa/     │     │   POSIX/    │
   │  NT Kernel  │     │  Darwin     │     │   Linux     │
   └─────────────┘     └─────────────┘     └─────────────┘
```

### HALの役割

| 役割 | 説明 |
|------|------|
| **統一API提供** | 異なるOSのAPIを共通インターフェースで抽象化 |
| **移植性確保** | 同一のエンジンコードが全プラットフォームで動作 |
| **最適化許容** | 各プラットフォーム固有の最適化をHAL層で実装可能 |
| **拡張容易性** | 新プラットフォームを既存コードに影響なく追加可能 |
| **コンパイル時選択** | ランタイムオーバーヘッドゼロで適切な実装を選択 |

### RHIとの違い

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        HAL vs RHI 比較                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   HAL（Hardware Abstraction Layer）    RHI（Rendering Hardware Interface）│
│   ┌────────────────────────────┐      ┌────────────────────────────┐   │
│   │                            │      │                            │   │
│   │  ・メモリ管理               │      │  ・グラフィックスAPI        │   │
│   │  ・プロセス/スレッド        │      │  ・シェーダー               │   │
│   │  ・ファイルI/O             │      │  ・テクスチャ/バッファ      │   │
│   │  ・時間管理                │      │  ・レンダーパイプライン      │   │
│   │  ・アトミック操作           │      │  ・コマンドリスト           │   │
│   │  ・ソケット通信             │      │  ・同期オブジェクト         │   │
│   │                            │      │                            │   │
│   │  【抽象化対象】             │      │  【抽象化対象】             │   │
│   │  OS / CPU / システム       │      │  GPU / グラフィックスAPI    │   │
│   │                            │      │                            │   │
│   │  【場所】                   │      │  【場所】                   │   │
│   │  Runtime/Core              │      │  Runtime/RHI               │   │
│   │                            │      │  Runtime/D3D12RHI 等       │   │
│   └────────────────────────────┘      └────────────────────────────┘   │
│                                                                         │
│   ※HALはシステム全体の基盤、RHIはレンダリング専用                        │
│   ※HALがなければRHIも動作不可能（HALの上にRHIが構築される）               │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 全体アーキテクチャ

### モジュール構成

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         Core モジュール構成                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Engine/Source/Runtime/Core/                                            │
│  │                                                                      │
│  ├── Public/                        【公開ヘッダー】                     │
│  │   │                                                                  │
│  │   ├── HAL/ ─────────────────────  抽象インターフェース層              │
│  │   │   │                          （90+ファイル）                      │
│  │   │   ├── Platform.h             エントリポイント                     │
│  │   │   ├── PlatformMemory.h       メモリ管理                          │
│  │   │   ├── PlatformProcess.h      プロセス管理                        │
│  │   │   ├── PlatformFile.h         ファイルI/O                         │
│  │   │   ├── PlatformAtomics.h      アトミック操作                      │
│  │   │   ├── PlatformTime.h         時間管理                            │
│  │   │   ├── PlatformTLS.h          スレッドローカル                    │
│  │   │   ├── PlatformMisc.h         その他ユーティリティ                 │
│  │   │   └── ...                                                        │
│  │   │                                                                  │
│  │   ├── GenericPlatform/ ─────────  汎用実装層                         │
│  │   │   │                          （40+ファイル）                      │
│  │   │   ├── GenericPlatform.h      基本型定義                          │
│  │   │   ├── GenericPlatformMemory.h                                    │
│  │   │   ├── GenericPlatformProcess.h                                   │
│  │   │   ├── GenericPlatformFile.h                                      │
│  │   │   └── ...                                                        │
│  │   │                                                                  │
│  │   ├── Windows/ ─────────────────  Windows固有層                      │
│  │   │   │                          （30+ファイル）                      │
│  │   │   ├── WindowsPlatform.h                                          │
│  │   │   ├── WindowsPlatformMemory.h                                    │
│  │   │   └── ...                                                        │
│  │   │                                                                  │
│  │   ├── Mac/ ─────────────────────  Mac固有層                          │
│  │   │                              （20+ファイル）                      │
│  │   │                                                                  │
│  │   ├── Linux/ ───────────────────  Linux固有層                        │
│  │   │                              （18ファイル）                       │
│  │   │                                                                  │
│  │   ├── Unix/ ────────────────────  Unix共通層                         │
│  │   │                              （POSIX互換プラットフォーム共通）     │
│  │   │                                                                  │
│  │   ├── Apple/ ───────────────────  Apple共通層                        │
│  │   │                              （Mac/iOS/tvOS/visionOS共通）       │
│  │   │                                                                  │
│  │   ├── Android/ ─────────────────  Android固有層                      │
│  │   │                                                                  │
│  │   ├── IOS/ ─────────────────────  iOS固有層                          │
│  │   │                                                                  │
│  │   └── Microsoft/ ───────────────  Microsoft共通層                    │
│  │                                  （Windows/Xbox共通）                 │
│  │                                                                      │
│  └── Private/                       【実装ファイル(.cpp)】               │
│      ├── HAL/                                                           │
│      ├── Windows/                   （26+ファイル）                      │
│      ├── Mac/                       （12ファイル）                       │
│      ├── Linux/                     （4ファイル）                        │
│      ├── Unix/                                                          │
│      └── ...                                                            │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### ファイル数の分布

| ディレクトリ | Public | Private | 説明 |
|-------------|--------|---------|------|
| HAL | 90+ | 30+ | 抽象インターフェース |
| GenericPlatform | 40+ | - | 汎用実装（ヘッダのみ） |
| Windows | 30+ | 26+ | Windows固有 |
| Mac | 20+ | 12 | macOS固有 |
| Linux | 18 | 4 | Linux固有（Unix継承） |
| Unix | 10+ | 5+ | POSIX共通 |
| Apple | 10+ | 8+ | Apple共通 |
| Android | 25+ | 20+ | Android固有 |
| IOS | 15+ | 10+ | iOS固有 |

---

## 3. 3層抽象化モデル

### 層構造の詳細

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         3層抽象化モデル                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【第1層】抽象インターフェース層 (HAL/)                                  │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │   PlatformMemory.h ─────────────────────────────────────────────  │ │
│  │   │                                                               │ │
│  │   │  役割：                                                       │ │
│  │   │   ・統一APIの定義                                             │ │
│  │   │   ・プラットフォーム固有ヘッダの自動インクルード               │ │
│  │   │   ・ユーザーコードが直接使用するエントリポイント               │ │
│  │   │                                                               │ │
│  │   │  内容：                                                       │ │
│  │   │   ・GenericPlatformMemory.h をインクルード                    │ │
│  │   │   ・COMPILED_PLATFORM_HEADER でプラットフォーム固有をインクルード│ │
│  │   │                                                               │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                              │                                          │
│                              ▼                                          │
│  【第2層】汎用実装層 (GenericPlatform/)                                  │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │   GenericPlatformMemory.h ──────────────────────────────────────  │ │
│  │   │                                                               │ │
│  │   │  役割：                                                       │ │
│  │   │   ・デフォルト実装の提供                                       │ │
│  │   │   ・全プラットフォーム共通の基底クラス定義                      │ │
│  │   │   ・オーバーライド可能なメソッドの宣言                         │ │
│  │   │                                                               │ │
│  │   │  内容：                                                       │ │
│  │   │   ・GenericPlatformMemory 構造体                             │ │
│  │   │   ・メモリ統計構造体                                          │ │
│  │   │   ・共通のメモリ操作（Memcpy, Memset等）                       │ │
│  │   │                                                               │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                              │                                          │
│                              ▼                                          │
│  【第3層】プラットフォーム固有層 (Windows/, Mac/, Linux/等)              │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │   WindowsPlatformMemory.h ──────────────────────────────────────  │ │
│  │   │                                                               │ │
│  │   │  役割：                                                       │ │
│  │   │   ・プラットフォーム固有の最適化実装                            │ │
│  │   │   ・OS固有APIの呼び出し                                       │ │
│  │   │   ・PlatformMemory への最終エイリアス定義                     │ │
│  │   │                                                               │ │
│  │   │  内容：                                                       │ │
│  │   │   ・WindowsPlatformMemory（GenericPlatformMemoryを継承）    │ │
│  │   │   ・VirtualAlloc/VirtualFree の使用                          │ │
│  │   │   ・typedef WindowsPlatformMemory PlatformMemory;          │ │
│  │   │                                                               │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 継承関係図

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         クラス継承関係                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│                    GenericPlatformMemory                               │
│                    （汎用基底クラス）                                    │
│                           │                                             │
│           ┌───────────────┼───────────────┐                             │
│           │               │               │                             │
│           ▼               ▼               ▼                             │
│   WindowsPlatform   MacPlatform    UnixPlatform                     │
│       Memory            Memory           Memory                         │
│           │               │               │                             │
│           │               │               └─────┬─────┐                 │
│           │               │                     │     │                 │
│           ▼               ▼                     ▼     ▼                 │
│    PlatformMemory  PlatformMemory      Linux...  Android...        │
│    (Windows時)       (Mac時)             PlatformMemory                 │
│                                                                         │
│   ※最終的に PlatformMemory という共通名でアクセス可能                   │
│   ※typedef によりコンパイル時にプラットフォーム固有クラスに解決          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 呼び出しの流れ

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ユーザーコードからの呼び出しフロー                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ユーザーコード                                                         │
│   ┌─────────────────────────────────────────────────────────┐           │
│   │  PlatformMemory::GetStats()                            │           │
│   └─────────────────────────────────────────────────────────┘           │
│                              │                                          │
│                              │ コンパイル時に解決                        │
│                              ▼                                          │
│   【Windowsでコンパイル時】                                              │
│   ┌─────────────────────────────────────────────────────────┐           │
│   │  WindowsPlatformMemory::GetStats()                     │           │
│   │  │                                                      │           │
│   │  ├─ GlobalMemoryStatusEx() を呼び出し                   │           │
│   │  ├─ MEMORYSTATUSEX 構造体からデータ取得                 │           │
│   │  └─ PlatformMemoryStats を構築して返却                 │           │
│   └─────────────────────────────────────────────────────────┘           │
│                                                                         │
│   【Macでコンパイル時】                                                  │
│   ┌─────────────────────────────────────────────────────────┐           │
│   │  MacPlatformMemory::GetStats()                         │           │
│   │  │                                                      │           │
│   │  ├─ host_statistics64() を呼び出し                      │           │
│   │  ├─ vm_statistics64_data_t からデータ取得               │           │
│   │  └─ PlatformMemoryStats を構築して返却                 │           │
│   └─────────────────────────────────────────────────────────┘           │
│                                                                         │
│   【Linuxでコンパイル時】                                                │
│   ┌─────────────────────────────────────────────────────────┐           │
│   │  UnixPlatformMemory::GetStats()                        │           │
│   │  │                                                      │           │
│   │  ├─ /proc/meminfo を読み取り                            │           │
│   │  ├─ sysinfo() を呼び出し                                │           │
│   │  └─ PlatformMemoryStats を構築して返却                 │           │
│   └─────────────────────────────────────────────────────────┘           │
│                                                                         │
│   ※ユーザーコードは変更不要                                              │
│   ※同一のソースコードが全プラットフォームで動作                          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. ヘッダインクルードシステム

### COMPILED_PLATFORM_HEADER マクロ

```
┌─────────────────────────────────────────────────────────────────────────┐
│                COMPILED_PLATFORM_HEADER の動作原理                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   【ビルド時】                                                           │
│   ┌───────────────────────────────────────────────────────────────────┐│
│   │  Unreal Build Tool (UBT) が                                       ││
│   │  UBT_COMPILED_PLATFORM マクロを定義                               ││
│   │                                                                   ││
│   │  例：                                                             ││
│   │   ・Windows向け → UBT_COMPILED_PLATFORM = Windows                ││
│   │   ・Mac向け     → UBT_COMPILED_PLATFORM = Mac                    ││
│   │   ・Linux向け   → UBT_COMPILED_PLATFORM = Linux                  ││
│   └───────────────────────────────────────────────────────────────────┘│
│                              │                                          │
│                              ▼                                          │
│   【PreprocessorHelpers.h】                                             │
│   ┌───────────────────────────────────────────────────────────────────┐│
│   │                                                                   ││
│   │  PLATFORM_HEADER_NAME = UBT_COMPILED_PLATFORM                    ││
│   │                                                                   ││
│   │  COMPILED_PLATFORM_HEADER(Suffix)                                ││
│   │    → "PLATFORM_HEADER_NAME/PLATFORM_HEADER_NAMESuffix"           ││
│   │                                                                   ││
│   │  展開例（Windowsの場合）：                                         ││
│   │    COMPILED_PLATFORM_HEADER(PlatformMemory.h)                    ││
│   │    → "Windows/WindowsPlatformMemory.h"                           ││
│   │                                                                   ││
│   └───────────────────────────────────────────────────────────────────┘│
│                              │                                          │
│                              ▼                                          │
│   【各HALヘッダでの使用】                                                │
│   ┌───────────────────────────────────────────────────────────────────┐│
│   │                                                                   ││
│   │  // HAL/PlatformMemory.h                                         ││
│   │  #include "GenericPlatform/GenericPlatformMemory.h"              ││
│   │  #include COMPILED_PLATFORM_HEADER(PlatformMemory.h)             ││
│   │                                                                   ││
│   │  // コンパイル時に以下のように展開される：                          ││
│   │  // Windows → #include "Windows/WindowsPlatformMemory.h"         ││
│   │  // Mac     → #include "Mac/MacPlatformMemory.h"                 ││
│   │  // Linux   → #include "Linux/LinuxPlatformMemory.h"             ││
│   │                                                                   ││
│   └───────────────────────────────────────────────────────────────────┘│
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### インクルード順序

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ヘッダインクルード順序                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ユーザーコード: #include "HAL/PlatformMemory.h"                        │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  1. CoreTypes.h                                                  │  │
│  │     └─ Platform.h                                                │  │
│  │        └─ PreprocessorHelpers.h                                  │  │
│  │           └─ COMPILED_PLATFORM_HEADER マクロ定義                 │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                              │                                          │
│                              ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  2. GenericPlatform/GenericPlatformMemory.h                      │  │
│  │     └─ GenericPlatformMemory 定義                               │  │
│  │     └─ GenericPlatformMemoryStats 定義                          │  │
│  │     └─ GenericPlatformMemoryConstants 定義                      │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                              │                                          │
│                              ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  3. COMPILED_PLATFORM_HEADER(PlatformMemory.h)                   │  │
│  │     │                                                            │  │
│  │     ├─ [Windows] Windows/WindowsPlatformMemory.h                 │  │
│  │     │   └─ WindowsPlatformMemory : GenericPlatformMemory       │  │
│  │     │   └─ typedef WindowsPlatformMemory PlatformMemory        │  │
│  │     │                                                            │  │
│  │     ├─ [Mac] Mac/MacPlatformMemory.h                             │  │
│  │     │   └─ MacPlatformMemory : GenericPlatformMemory           │  │
│  │     │   └─ typedef MacPlatformMemory PlatformMemory            │  │
│  │     │                                                            │  │
│  │     └─ [Linux] Linux/LinuxPlatformMemory.h                       │  │
│  │         └─ （通常はUnix共通を使用）                               │  │
│  │         └─ typedef UnixPlatformMemory PlatformMemory           │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                              │                                          │
│                              ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  結果：PlatformMemory がプラットフォーム固有クラスに解決         │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 5. プラットフォーム階層と分類

### プラットフォームファミリー構造

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    プラットフォーム階層構造                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│                          全プラットフォーム                              │
│                               │                                         │
│       ┌───────────────────────┼───────────────────────┐                 │
│       │                       │                       │                 │
│       ▼                       ▼                       ▼                 │
│  ┌─────────┐            ┌─────────┐            ┌─────────┐             │
│  │Desktop  │            │ Mobile  │            │ Console │             │
│  │プラット │            │プラット │            │プラット │             │
│  │フォーム │            │フォーム │            │フォーム │             │
│  └────┬────┘            └────┬────┘            └────┬────┘             │
│       │                      │                      │                   │
│   ┌───┴───┐              ┌───┴───┐                  │                   │
│   │       │              │       │                  │                   │
│   ▼       ▼              ▼       ▼                  ▼                   │
│ ┌─────┐ ┌─────┐       ┌─────┐ ┌─────┐          ┌─────┐                │
│ │Win  │ │Unix │       │iOS  │ │Andr │          │Swtch│                │
│ │dows │ │系   │       │系   │ │oid  │          │     │                │
│ └──┬──┘ └──┬──┘       └──┬──┘ └─────┘          └─────┘                │
│    │       │              │                                             │
│    │    ┌──┴──┐        ┌──┴──┐                                         │
│    │    │     │        │     │                                         │
│    ▼    ▼     ▼        ▼     ▼                                         │
│  Win64 Mac  Linux    iOS  tvOS  visionOS                               │
│  WinArm              iPhone iPad                                        │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 共通層の関係

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       共通層とプラットフォームの関係                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   【Microsoft共通層】                    【Apple共通層】                  │
│   ┌─────────────────────┐               ┌─────────────────────┐         │
│   │    Microsoft/       │               │      Apple/         │         │
│   │  ・MSVCコンパイラ    │               │  ・Clangコンパイラ   │         │
│   │  ・Win32 API基盤    │               │  ・Objective-C連携  │         │
│   │  ・DirectX関連      │               │  ・Metal基盤        │         │
│   └─────────┬───────────┘               └──────────┬──────────┘         │
│             │                                      │                    │
│             ▼                                      ▼                    │
│   ┌─────────────────────┐               ┌─────────────────────┐         │
│   │      Windows/       │               │        Mac/         │         │
│   │      Xbox/          │               │        IOS/         │         │
│   └─────────────────────┘               │       tvOS/         │         │
│                                         │     visionOS/       │         │
│                                         └─────────────────────┘         │
│                                                                         │
│   【Unix共通層】                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                           Unix/                                 │   │
│   │  ・POSIX API                                                    │   │
│   │  ・pthread                                                      │   │
│   │  ・BSD Socket                                                   │   │
│   │  ・mmap/munmap                                                  │   │
│   └───────────────────────────────┬─────────────────────────────────┘   │
│                                   │                                     │
│       ┌───────────────────────────┼───────────────────────────────┐     │
│       │                           │                               │     │
│       ▼                           ▼                               ▼     │
│   ┌───────┐                   ┌───────┐                       ┌───────┐ │
│   │Linux/ │                   │ Mac/  │                       │Android│ │
│   │       │                   │ IOS/  │                       │   /   │ │
│   └───────┘                   └───────┘                       └───────┘ │
│                                                                         │
│   【Clang共通層】                                                        │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                           Clang/                                │   │
│   │  ・Clangコンパイラ固有の属性                                     │   │
│   │  ・警告制御                                                      │   │
│   │  ・最適化ヒント                                                  │   │
│   └───────────────────────────────┬─────────────────────────────────┘   │
│                                   │                                     │
│       ┌───────────────────────────┼───────────────────────────────┐     │
│       ▼                           ▼                               ▼     │
│   Unix系全般                  Apple系全般                     Android   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### プラットフォーム識別マクロ一覧

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   プラットフォーム識別マクロ                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【個別プラットフォーム】                                                │
│  ┌─────────────────────┬─────────────────────────────────────────────┐ │
│  │ マクロ名             │ 説明                                       │ │
│  ├─────────────────────┼─────────────────────────────────────────────┤ │
│  │ PLATFORM_WINDOWS    │ Windows (64bit)                            │ │
│  │ PLATFORM_MAC        │ macOS                                      │ │
│  │ PLATFORM_LINUX      │ Linux (x64)                                │ │
│  │ PLATFORM_LINUXARM64 │ Linux (ARM64)                              │ │
│  │ PLATFORM_IOS        │ iOS (iPhone/iPad)                          │ │
│  │ PLATFORM_TVOS       │ tvOS (Apple TV)                            │ │
│  │ PLATFORM_VISIONOS   │ visionOS (Apple Vision Pro)                │ │
│  │ PLATFORM_ANDROID    │ Android                                    │ │
│  │ PLATFORM_SWITCH     │ Nintendo Switch                            │ │
│  │ PLATFORM_FREEBSD    │ FreeBSD                                    │ │
│  └─────────────────────┴─────────────────────────────────────────────┘ │
│                                                                         │
│  【プラットフォームグループ】                                            │
│  ┌─────────────────────┬─────────────────────────────────────────────┐ │
│  │ マクロ名             │ 含まれるプラットフォーム                     │ │
│  ├─────────────────────┼─────────────────────────────────────────────┤ │
│  │ PLATFORM_DESKTOP    │ Windows, Mac, Linux                        │ │
│  │ PLATFORM_APPLE      │ Mac, iOS, tvOS, visionOS                   │ │
│  │ PLATFORM_UNIX       │ Mac, Linux, iOS, Android, FreeBSD          │ │
│  │ PLATFORM_MICROSOFT  │ Windows, Xbox                              │ │
│  └─────────────────────┴─────────────────────────────────────────────┘ │
│                                                                         │
│  【アーキテクチャ】                                                      │
│  ┌─────────────────────┬─────────────────────────────────────────────┐ │
│  │ マクロ名             │ 説明                                       │ │
│  ├─────────────────────┼─────────────────────────────────────────────┤ │
│  │ PLATFORM_64BITS     │ 64ビットプラットフォーム（必須）            │ │
│  │ PLATFORM_CPU_X86_FAMILY │ x86/x64アーキテクチャ                  │ │
│  │ PLATFORM_CPU_ARM_FAMILY │ ARM/ARM64アーキテクチャ                │ │
│  │ PLATFORM_LITTLE_ENDIAN  │ リトルエンディアン                     │ │
│  └─────────────────────┴─────────────────────────────────────────────┘ │
│                                                                         │
│  【サブプラットフォーム】                                                │
│  ┌─────────────────────┬─────────────────────────────────────────────┐ │
│  │ マクロ名             │ 説明                                       │ │
│  ├─────────────────────┼─────────────────────────────────────────────┤ │
│  │ PLATFORM_MAC_X86    │ Mac (Intel)                                │ │
│  │ PLATFORM_MAC_ARM64  │ Mac (Apple Silicon)                        │ │
│  │ PLATFORM_ANDROID_ARM│ Android (32bit ARM)                        │ │
│  │ PLATFORM_ANDROID_ARM64│ Android (64bit ARM)                      │ │
│  │ PLATFORM_ANDROID_X86│ Android (x86)                              │ │
│  │ PLATFORM_ANDROID_X64│ Android (x64)                              │ │
│  │ PLATFORM_WINDOWS_ARM64EC│ Windows ARM64EC                        │ │
│  └─────────────────────┴─────────────────────────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 次のパート

[第2部：プリプロセッサと型システム](Platform_Abstraction_Layer_Part2.md) に続く

---

*このドキュメントはUnreal Engine 5.7のソースコードに基づいています。*
