/// @file D3D12RHIPrivate.h
/// @brief D3D12RHI内部共通ヘッダー
/// @details D3D12RHI Private/*.cpp から最初にインクルードする内部ヘッダー。
///          サードパーティヘッダー + 共通ユーティリティをまとめる。
#pragma once

//=============================================================================
// サードパーティ
//=============================================================================

#include "D3D12RHI/Internal/D3D12ThirdParty.h"

//=============================================================================
// エンジン共通
//=============================================================================

#include "Common/Logging/Logging.h"
#include "Common/Utility/Macros.h"

//=============================================================================
// RHI Public API
//=============================================================================

#include "RHI/Public/RHIEnums.h"
#include "RHI/Public/RHIFwd.h"
#include "RHI/Public/RHIMacros.h"

//=============================================================================
// D3D12RHI 公開定数
//=============================================================================

#include "D3D12RHI/Public/D3D12RHI.h"

//=============================================================================
// D3D12RHI 内部定数
//=============================================================================

namespace NS::D3D12RHI
{
    static constexpr uint32 kQueueTypeCount = static_cast<uint32>(NS::RHI::ERHIQueueType::Count);
}

//=============================================================================
// HRESULT チェックマクロ
//=============================================================================

/// HRESULT成功チェック（失敗時ログ出力）
#define D3D12RHI_CHECK_HR(hr)                                                                                          \
    do                                                                                                                 \
    {                                                                                                                  \
        HRESULT _hr = (hr);                                                                                            \
        if (FAILED(_hr))                                                                                               \
        {                                                                                                              \
            LOG_ERROR("[D3D12RHI] HRESULT failed");                                                                    \
        }                                                                                                              \
    }                                                                                                                  \
    while (0)

/// HRESULT成功チェック（失敗時ログ出力 + false返却）
#define D3D12RHI_CHECK_HR_RETURN(hr)                                                                                   \
    do                                                                                                                 \
    {                                                                                                                  \
        HRESULT _hr = (hr);                                                                                            \
        if (FAILED(_hr))                                                                                               \
        {                                                                                                              \
            LOG_ERROR("[D3D12RHI] HRESULT failed");                                                                    \
            return false;                                                                                              \
        }                                                                                                              \
    }                                                                                                                  \
    while (0)
